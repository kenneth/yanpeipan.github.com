---
layout: post
title: "Git使用指南"
description: ""
category: 
tags: [Git]
---
{% include JB/setup %}

## 为何是Git

> 对于Git与其他集中式代码管理工具相比的优缺点的全面讨论，请参见[这里](https://git.wiki.kernel.org/index.php/GitSvnComparsion)。这样的争论总是喋喋不休。作为一个开发者，与现今的其他开发工具相比较，我更喜欢Git。Git真得改变了开发者对于合并和分支的思考。我曾经使用经典的CVS/Subversion，然而每次的合并/分支和其他行为总让人担惊受怕（“小心合并里的冲突，简直要命！”）。  
> 但是对于Git来说，这些行为非常简单和搞笑，它们被认为是日常工作中的核心部分。例如，在很多CVS/Subversion书里，分支与合并总是在后面的章节中被讨论（对于高级用户使用），然而在每个Git[书](https://pragprog.com/book/tsgit/pragmatic-version-control-using-git)中，在第3章就已经完全涵盖了（作为基础）。  
> 简单和重复的特性带来的结果是：分支与合并不再是什么可以害怕的东西。分支/合并被认为对于版本管理工具比其他功能更重要。
关于工具，不再多说，让我们直接看开发模型吧。这个模型并不是如下模型：在管理软件开发进度方面，面对每个开发过程，每个队员必须按一定次序开发。

----------------------------

## 初次运行 Git 前的配置

    $ git config --global user.name "John Doe"
    $ git config --global user.email johndoe@example.com

更多信息可以参考：[Git 起步](http://git-scm.com/book/zh/v1/%E8%B5%B7%E6%AD%A5-%E5%88%9D%E6%AC%A1%E8%BF%90%E8%A1%8C-Git-%E5%89%8D%E7%9A%84%E9%85%8D%E7%BD%AE)

----------------------------

## 快速开始

将本地项目`Inmi`, 推送到`http://luxtone.red16.com:88/inmi.git`  

    git init
    git add *
    git remote add origin http://luxtone.red16.com:88/inmi.git
    git push -u origin master

如果在`Inmi`文件夹中已经创建本地仓库

    git remote add origin http://luxtone.red16.com:88/inmi.git
    git push -u origin master


## 基本操作

创建新的仓库

    git init

检出本地仓库

    git clone /path/to/repository

检出远端仓库
    
    git clone username@host:/path/to/repository

查看仓库状态
    
    git status

忽略某些文件, 在工作根目录中添加一个叫`.gitignore`的文件，来告诉Git系统要忽略 掉哪些文件，下面是文件内容的示例:

    # 以'#' 开始的行，被视为注释.
    # 忽略掉所有文件名是 foo.txt 的文件.
    foo.txt
    # 忽略所有生成的 html 文件,
    *.html
    # foo.html是手工维护的，所以例外.
    !foo.html
    #  忽略所有.o 和 .a文件.
    *.[oa]
    

添加，添加到暂存区
	
    git add <filename>

    git add <dir>

    git add *

使用 `git reset HEAD <file>` 撤出暂存区

提交, 提交到HEAD

    git commit -m "代码提交信息"

强制提交空信息: `git commit --allow-empty-message -m ''`

撤销修改

    git checkout -- <file>

推送, 推送到远端仓库`orign`的`master`中
    
    git push origin master

拉取, 从远端仓库`orign`拉取代码

    git fetch origin

拉取, 从远端仓库`origin`拉取代码, 然后与本地仓库合并, 发生代码冲突时， 要解决冲突才能再次提交

    git pull origin

查看远端仓库列表

    git remote

推送到`GitHub`

    git remote add github https://github.com/inmi/inmi
    git push -u github master

改变`origin`的url
    
    git remote origin set-url https://github.com/inmi/inmi

----------------------------

## git-flow 一个成功的Git分支模型
git-flow 是一个 git 扩展集，按 Vincent Driessen 的分支模型提供高层次的库操作。 [查看详情](http://nvie.com/posts/a-successful-git-branching-model/)

### 初始化

在本地仓库初始化工作流， 使用默认配置

    git flow init

### 特性

1. 为即将发布的版本开发新功能特性。
2. 这通常只存在开发者的库中。
3. 新特性的开发是基于 `develop` 分支的。

增加新特性`elaticsearch`

    git flow feature start elaticsearch 

完成开发新特性

    git flow feature finish elaticsearch

发布新特性

    git flow feature publish elaticsearch

取得一个发布的新特性分支, 其他用户发布的新特性分支

    git flow feature pull elasticsearch

### 作一个release版本

1. 支持一个新的用于生产环境的发布版本。
2. 允许修正小问题，并为发布版本准备元数据。

开始准备release版本, 版本号`beta-338`

    git flow release start beta-338

创建 release 分支之后立即发布允许其它用户向这个 release 分支提交见容是个明智的做法。命令十分类似发布新特性：`git flow release publish RELEASE`。 你可以通过 `git flow release track RELEASE` 命令签出 `release` 版本的远程变更

完成 release 版本

    git flow release finish beta-338

`git flow release start RELEASE [BASE]`可以选择提供一个 [BASE]参数，即提交记录的 sha-1 hash 值，来开启动 release 分支. 这个提交记录的 sha-1 hash 值必须是`develop` 分支下的。

### 热点

1. 热点修复来自这样的需求：生产环境的版本处于一个不预期状态，需要立即修正。
2. 有可能是需要修正 master 分支上某个 TAG 标记的生产版本。

开始 git flow 热点修复

    git flow hotfix start VERSION [BASENAME]

`VERSION` 参数标记着修正版本, 如`beta-339`。你可以从 `[BASENAME]`开始，`[BASENAME]`为`finish release`时填写的版本号

完成热点修复

    git flow hotfix finish VERSION

![](http://danielkummer.github.io/git-flow-cheatsheet/img/git-flow-commands.png)

----------------------------

## 参考资料
[git - 简易指南](http://www.bootcss.com/p/git-guide/)  
[Git教程](http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000)  
[git-flow 备忘清单](http://danielkummer.github.io/git-flow-cheatsheet/index.zh_CN.html)  
[一个成功的Git分支模型](http://www.juvenxu.com/2010/11/28/a-successful-git-branching-model/)  
[A successful Git branching model](http://nvie.com/posts/a-successful-git-branching-model/)  
[Pro Git](http://git-scm.com/book/zh/v1)  
[git --fast-version-control](http://git-scm.com/doc)  
[GitHub Help](https://help.github.com/)  
